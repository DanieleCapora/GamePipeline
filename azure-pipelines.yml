# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- '*'

pool:
  vmImage: windows-2019

variables:
  percorsoPreBuild: '../DirectoryPreBuild'
  numeroFilePNG: 4
  extensionPNG: "png"



steps:

- powershell:  |
      new-item base.ps1 -type file -force -value '
      param ($input1, $extension) 
      $input2 = (Get-ChildItem -path .\DirectoryPreBuild\assets\grafica\*.$extension).count
      if($input1 -ne $input2)
      {
        Write-Error "NOOOOOOO"
        exit 1
      }'
  displayName: creazione shell program base.ps1

#controllo file .png
- task: PowerShell@2
  inputs:
   targetType: filePath
   filePath: $(System.DefaultWorkingDirectory)\base.ps1
   arguments: >
     -input1 $(numeroFilePNG)
     -extension $(extensionPNG)
     